# 📊 データ可視化ダッシュボード（Streamlit）

CSVをアップロードするだけで、データ概要・単変量解析・相関/散布図・外れ値分析をノーコードで行えるStreamlitアプリです。

日本語のフォント表示に対応し、Shift-JIS / CP932 / EUC-JP / UTF-8の自動判定で読み込みます。

---

## 🔧 今後の予定
- 時系列分析タブの拡張（現在「開発中」表示）

---

## 🚀 デモ（ローカル実行）

### 1) 仮想環境の作成（任意）
```bash
# macOS / Linux
python -m venv .venv && . .venv/bin/activate

# Windows
# python -m venv .venv
# .venv\Scripts\activate
````

### 2\) 依存関係のインストール

```bash
pip install -U pip
pip install streamlit pandas numpy plotly seaborn scipy matplotlib japanize-matplotlib
```

### 3\) 起動

```bash
streamlit run app.py   # ← ファイル名に合わせて変更
```

起動後、左サイドバーからCSVをアップロードするか、\*\*「アイリスデータセットを読み込み」\*\*ボタンでサンプル確認できます。

-----

## 🗂️ 対応データと読み込み仕様

  - **入力**：CSV（1行目ヘッダ）
  - **文字コード**：`utf-8` / `shift_jis` / `cp932` / `euc-jp` を順に自動判定
      - 判定に失敗した場合は `utf-8` + `errors='ignore'` で読込み、ワーニングを表示
  - `index_col=0` で1列目をインデックスとして扱います（必要に応じて列構成をご調整ください）

-----

## 🧭 画面構成（タブ）

### 1\) 📋 データ概要

  - 行数・列数・数値/カテゴリ列数・欠損値総数・重複行数のサマリー
  - データプレビュー（`st.dataframe`）
  - 列ごとのデータ型 / ユニーク数 / 欠損値 / 欠損率
  - 数値列の基本統計量（平均・標準偏差・最小/最大 ほか）

### 2\) 📊 単変量解析

  - **ブール変数**：棒グラフ
  - **カテゴリ変数**：棒グラフ＋（カテゴリ数≦10のとき）円グラフ
  - **数値変数**：
      - ヒストグラム（ビン数可変）＋KDE（任意）＋平均/中央値ライン
      - 右側にボックスプロット
      - 歪度・尖度も自動計算
  - **ヴァイオリンプロット**：カテゴリでのグループ化、ボックス・ポイント重畳、ANOVA（scipyありの場合）

### 3\) 🔗 相関・関係分析

  - **散布図**：カテゴリ色分け可／単色時は回帰線オプション
  - **相関行列ヒートマップ**：平均/最大/最小の要約、閾値以上の強相関ペア抽出
  - **ペアプロット**：最大6列推奨／色分け・サンプリング対応

### 4\) 📦 外れ値分析

  - **箱ひげ図**：IQRによる外れ値件数と比率を表示
  - **Z-Score**：しきい値可変、外れ値を赤でハイライト

### 5\) 🕰️ 時系列分析

  - 開発中（UI土台のみ）

-----

## 🧰 サイドバー機能

  - **外れ値除去（IQR法）**：オンにすると全数値列にIQRフィルタを適用（件数の増減を表示）
  - **カテゴリフィルタ**：任意のカテゴリ列を選び、複数値でフィルタリング
  - 機能一覧のトグル
  - サンプルデータ（Iris）読み込みボタン

-----

## 🧩 技術スタック

  - **フロント**：Streamlit
  - **可視化**：Plotly（express / graph\_objects）、Matplotlib、Seaborn
  - **統計**：NumPy / Pandas / SciPy（`gaussian_kde`, `skew`, `kurtosis`, `f_oneway`）
  - **日本語表示**：japanize-matplotlib
  - **UX**：Toast通知、カスタムCSS、`@st.cache_data`

-----

## 📦 依存関係

```
streamlit
pandas
numpy
plotly
seaborn
scipy
matplotlib
japanize-matplotlib
```

*補足：SciPyが未導入の場合、ANOVAはスキップされ情報メッセージを表示します。*

-----

## 🔒 既知の制約・注意点

  - 読み込み時に1列目がインデックスとして扱われます。実データで不要な場合は列入替・保存時にご注意ください。
  - 文字コード判定が難しいデータでは、一部文字が欠落・置換される可能性があります（ワーニング表示）。
  - 極端に大きいCSVでは、ペアプロットや相関行列の描画に時間がかかる場合があります（サンプリングの活用推奨）。
  - 時系列タブは開発中です。

-----

## 🧪 使い方のヒント

  - **前処理**：外れ値除去（IQR法）は全タブに反映されます。分析前の軽いクレンジングに便利です。
  - **粒度調整**：カテゴリの粒度が細かすぎる場合は、事前にグルーピングやカテゴリ結合を行うと見やすくなります。
  - **相関の解釈**：強相関ペアの抽出機能で多重共線性の手がかりを得られます。特徴量選択の当たりを付けるのに有用です。

-----

## ☁️ デプロイ（例）

### Streamlit Community Cloud

リポジトリを連携し、`main`ブランチとエントリポイント（例：`app.py`）を指定するだけで公開可能です。

### Docker（任意）

  - ベースイメージ：`python:3.11-slim` など
  - `requirements.txt` を用意して `streamlit run` を `CMD` に設定

-----

## 📁 リポジトリ構成（例）

```
repo/
├─ app.py                 # ← このREADMEのコード本体
├─ requirements.txt       # 依存関係
├─ data/                  # （任意）サンプルCSV
└─ README.md              # 本ドキュメント
```

-----

## 📝 ライセンス

（例）[MIT License](https://opensource.org/licenses/MIT)

→ *実運用に合わせてお好みのライセンス文面に差し替えてください。*

-----

## 🙌 著者 / ポートフォリオ

  - **Author**: 前木場 舜
  - **目的**: 学術・業務での探索的データ分析（EDA）や仮説立案を効率化し、分析着手までの時間を短縮するための汎用可視化ツール

-----

## 🔧 開発メモ（実装ポイント）

  - `@st.cache_data` で読込・IQR除去をキャッシュし、再利用時の体験を向上
  - カスタムCSSで見出しスタイルを調整（`.main-header` / `.section-header`）
  - Toast通知で「読込成功」「外れ値除去」イベントをフィードバック
  - 例外時は `st.error` / `st.warning` / `st.info` で明示的にユーザーへ通知